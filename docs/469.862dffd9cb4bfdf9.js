"use strict";(self.webpackChunkToDoListApp=self.webpackChunkToDoListApp||[]).push([[469],{3146:(U,m,s)=>{s.d(m,{n:()=>L});var a=s(5777),i=s(2004),l=s(727),p=s(2603),e=s(4650),t=s(9653),g=s(2965),v=s(6895),C=s(4859),I=s(3546);function K(n,k){if(1&n){const d=e.EpF();e.TgZ(0,"div")(1,"p",4),e._uU(2," Would you like to restore this task to uncompleted? "),e.qZA(),e.TgZ(3,"div",5)(4,"div",6)(5,"button",7),e.NdJ("click",function(){e.CHM(d);const c=e.oxw(2);return e.KtG(c.onRestoreCompleted())}),e._uU(6," Yes! "),e.qZA(),e.TgZ(7,"button",8),e._uU(8," No! "),e.qZA()()()()}}function f(n,k){if(1&n){const d=e.EpF();e.TgZ(0,"p",4),e._uU(1,"This task was completed successfully?"),e.qZA(),e.TgZ(2,"div",5)(3,"div",6)(4,"button",7),e.NdJ("click",function(){e.CHM(d);const c=e.oxw(2);return e.KtG(c.onCompletedTask())}),e._uU(5," Yes! "),e.qZA(),e.TgZ(6,"button",8),e._uU(7," No! "),e.qZA()()()}}function D(n,k){if(1&n&&(e.TgZ(0,"mat-card",1),e.YNc(1,K,9,0,"div",2),e.YNc(2,f,8,0,"ng-template",null,3,e.W1O),e.qZA()),2&n){const d=e.MAs(3),h=e.oxw();e.xp6(1),e.Q6J("ngIf",h.task.isDone)("ngIfElse",d)}}let L=(()=>{class n{constructor(d,h){this.store=d,this.router=h,this.task=void 0,this.taskSubscription=new l.w0,window.scrollTo(0,0),this.taskSubscription=this.store.select(p.yW).subscribe(c=>{c&&(this.task=c)})}onCompletedTask(){const d={id:this.task.id,title:this.task.title,description:this.task.description,startDate:this.task.startDate,isDone:!0,doneDate:this.task.startDate?new Date:void 0};this.store.dispatch((0,a.Tc)({status:!0})),this.store.dispatch((0,i.kj)({task:d})),this.router.navigate(["todo-tasks"])}onRestoreCompleted(){const d={id:this.task.id,title:this.task.title,description:this.task.description,startDate:this.task.startDate,isDone:!1,doneDate:void 0};this.store.dispatch((0,a.Tc)({status:!0})),this.store.dispatch((0,i.kj)({task:d})),this.router.navigate(["done-tasks"])}ngOnDestroy(){this.taskSubscription&&this.taskSubscription.unsubscribe()}}return n.\u0275fac=function(d){return new(d||n)(e.Y36(t.yh),e.Y36(g.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-changing-status"]],decls:1,vars:1,consts:[["class","my-5",4,"ngIf"],[1,"my-5"],[4,"ngIf","ngIfElse"],["completeTask",""],[1,"my-5","text-center"],[1,"row"],[1,"my-3","d-flex","justify-content-center"],["mat-raised-button","",1,"green-button",3,"click"],["mat-raised-button","","routerLink","/todo-tasks",1,"red-button"]],template:function(d,h){1&d&&e.YNc(0,D,4,2,"mat-card",0),2&d&&e.Q6J("ngIf",h.task)},dependencies:[v.O5,g.rH,C.lW,I.a8],styles:[".green-button[_ngcontent-%COMP%]{background-color:#7cfc00}.red-button[_ngcontent-%COMP%]{background-color:red}"]}),n})()},6587:(U,m,s)=>{s.d(m,{M:()=>k});var a=s(4006),i=s(2603),l=s(727),p=s(2004),e=s(5777),t=s(4650),g=s(9653),v=s(2965),C=s(6895),I=s(4859),K=s(3546),f=s(9549),D=s(4144);function L(d,h){if(1&d&&(t.TgZ(0,"div")(1,"mat-error"),t._uU(2),t.qZA()()),2&d){const c=t.oxw();t.xp6(2),t.Oqu(c.showTitleErrors())}}function n(d,h){if(1&d&&(t.TgZ(0,"div")(1,"mat-error"),t._uU(2),t.qZA()()),2&d){const c=t.oxw();t.xp6(2),t.hij(" ",c.showDescriptionErrors(),"")}}let k=(()=>{class d{constructor(c,T,M){this.fb=c,this.store=T,this.router=M,this.task=void 0,this.taskSubscription=new l.w0}ngOnInit(){window.scrollTo(0,0),this.createForm(),this.taskSubscription=this.store.select(i.yW).subscribe(c=>{c&&(this.task=c,this.taskForm.patchValue({title:c?.title,description:c?.description}))})}createForm(){this.taskForm=this.fb.group({title:this.fb.nonNullable.control(void 0,a.kI.compose([a.kI.required,a.kI.minLength(5)])),description:this.fb.nonNullable.control(void 0,a.kI.compose([a.kI.required,a.kI.minLength(10)]))})}ngOnDestroy(){this.taskSubscription&&this.taskSubscription.unsubscribe()}get getTaskFormControl(){return this.taskForm.controls}get getTaskFormIsValid(){return this.taskForm.valid}get getTitleIsNotValid(){return this.getTaskFormControl.title.touched&&!this.getTaskFormControl.title.valid}get getDescriptionIsNotValid(){return this.getTaskFormControl.description.touched&&!this.getTaskFormControl.description.valid}showTitleErrors(){const c=this.getTaskFormControl.title;if(this.getTitleIsNotValid){if(c.getError("required"))return"Title is required";if(c.getError("minlength"))return"Title should be minimum 5 characters"}}showDescriptionErrors(){const c=this.getTaskFormControl.description;if(this.getDescriptionIsNotValid){if(c.getError("required"))return"Description is required";if(c.getError("minlength"))return"Description should be minimum 10 characters"}}onEditTask(){this.taskForm.valid&&(this.store.dispatch((0,e.Tc)({status:!0})),this.store.dispatch((0,p.xJ)({task:{id:this.task.id,title:this.taskForm.value.title,description:this.taskForm.value.description,startDate:this.task.startDate,isDone:!0,doneDate:this.task.startDate?new Date:void 0}})),this.router.navigate(["done-tasks"]))}}return d.\u0275fac=function(c){return new(c||d)(t.Y36(a.qu),t.Y36(g.yh),t.Y36(v.F0))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-edit-task"]],decls:17,vars:4,consts:[[1,"my-3"],[3,"formGroup"],["matInput","","formControlName","title"],[4,"ngIf"],["matInput","","formControlName","description"],["type","submit","mat-raised-button","",1,"green-button",3,"disabled","click"]],template:function(c,T){1&c&&(t.TgZ(0,"h3",0),t._uU(1," Edit Task "),t._UZ(2,"hr"),t.qZA(),t.TgZ(3,"mat-card",1)(4,"mat-form-field")(5,"mat-label"),t._uU(6,"Title"),t.qZA(),t._UZ(7,"input",2),t.YNc(8,L,3,1,"div",3),t.qZA(),t.TgZ(9,"mat-form-field")(10,"mat-label"),t._uU(11,"Description"),t.qZA(),t._UZ(12,"textarea",4),t.YNc(13,n,3,1,"div",3),t.qZA(),t.TgZ(14,"div",0)(15,"button",5),t.NdJ("click",function(){return T.onEditTask()}),t._uU(16," Update "),t.qZA()()()),2&c&&(t.xp6(3),t.Q6J("formGroup",T.taskForm),t.xp6(5),t.Q6J("ngIf",T.getTitleIsNotValid),t.xp6(5),t.Q6J("ngIf",T.getDescriptionIsNotValid),t.xp6(2),t.Q6J("disabled",!T.getTaskFormIsValid))},dependencies:[a.Fj,a.JJ,a.JL,a.sg,a.u,C.O5,I.lW,K.a8,f.KE,f.hX,f.TO,D.Nt],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.green-button[_ngcontent-%COMP%]{background-color:#7cfc00}"]}),d})()},5088:(U,m,s)=>{s.d(m,{q:()=>l});var a=s(4466),i=s(4650);let l=(()=>{class p{}return p.\u0275fac=function(t){return new(t||p)},p.\u0275mod=i.oAB({type:p}),p.\u0275inj=i.cJS({imports:[a.m]}),p})()},2004:(U,m,s)=>{s.d(m,{Hg:()=>M,Lk:()=>W,Rj:()=>n,U1:()=>T,Zn:()=>D,_5:()=>k,aO:()=>c,bl:()=>d,gI:()=>f,kj:()=>h,xJ:()=>L});var a=s(9653);const f=(0,a.PH)("[todo tasks page] add task",(0,a.Ky)()),D=(0,a.PH)("[todo tasks page] add task success",(0,a.Ky)()),L=(0,a.PH)("[tasks page] update task",(0,a.Ky)()),n=(0,a.PH)("[tasks page] update task success",(0,a.Ky)()),k=(0,a.PH)("[tasks page] delete task",(0,a.Ky)()),d=(0,a.PH)("[tasks page] delete task success",(0,a.Ky)()),h=(0,a.PH)("[tasks page] change task status",(0,a.Ky)()),c=(0,a.PH)("[tasks page] change task status success",(0,a.Ky)()),T=(0,a.PH)("[tasks page] load tasks"),M=(0,a.PH)("[tasks page] load tasks success ",(0,a.Ky)()),W=(0,a.PH)("[dummy action]")},7999:(U,m,s)=>{s.d(m,{b:()=>R});var a=s(493),i=s(2004),l=s(1365),p=s(5577),e=s(4004),t=s(262),g=s(515),v=s(4482),C=s(5403),I=s(8421),K=s(2805);function f(_){let r,O=1/0;return null!=_&&("object"==typeof _?({count:O=1/0,delay:r}=_):O=_),O<=0?()=>g.E:(0,v.e)((S,P)=>{let A,y=0;const o=()=>{if(A?.unsubscribe(),A=null,null!=r){const E="number"==typeof r?(0,K.H)(r):(0,I.Xf)(r(y)),x=(0,C.x)(P,()=>{x.unsubscribe(),u()});E.subscribe(x)}else u()},u=()=>{let E=!1;A=S.subscribe((0,C.x)(P,void 0,()=>{++y<O?A?o():E=!0:P.complete()})),E&&o()};u()})}var D=s(3900),L=s(9300),n=s(5777),k=s(6943),d=s(9119),h=s(9646),c=s(2603),T=s(4650),M=s(9653),W=s(529);let b=(()=>{class _{constructor(r){this.http=r}getTasks(){return this.http.get("https://todolistapp-797f3-default-rtdb.europe-west1.firebasedatabase.app/tasks.json").pipe((0,e.U)(r=>{const S=[];for(let P in r)S.push({...r[P],id:P});return S}))}addTask(r){return this.http.post("https://todolistapp-797f3-default-rtdb.europe-west1.firebasedatabase.app/tasks.json",r)}updateTask(r){return this.http.patch("https://todolistapp-797f3-default-rtdb.europe-west1.firebasedatabase.app/tasks.json",{[r.id]:{title:r.title,description:r.description,startDate:r.startDate,doneDate:r.doneDate,isDone:r.isDone}})}deleteTask(r){return this.http.delete(`https://todolistapp-797f3-default-rtdb.europe-west1.firebasedatabase.app/tasks/${r}.json`)}getTaskById(r){return this.http.get(`https://todolistapp-797f3-default-rtdb.europe-west1.firebasedatabase.app/tasks/${r}.json`)}changeTaskStatus(r){return this.http.patch("https://todolistapp-797f3-default-rtdb.europe-west1.firebasedatabase.app/tasks.json",{[r.id]:{title:r.title,description:r.description,startDate:r.startDate,doneDate:r.doneDate,isDone:r.isDone,endDate:r.isDone?void 0:new Date}})}getErrorMessage(r){return r}}return _.\u0275fac=function(r){return new(r||_)(T.LFG(W.eN))},_.\u0275prov=T.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})();var F=s(2965),B=s(2013);let R=(()=>{class _{constructor(r,S,P,y,A){this.actions$=r,this.store=S,this.tasksService=P,this.router=y,this.notification=A,this.loadTasks=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(i.U1),(0,l.M)(this.store.select(c.Ak)),(0,p.z)(([o,u])=>u.length&&1!==u.length?(0,h.of)((0,i.Lk)()):this.tasksService.getTasks().pipe((0,e.U)(E=>(this.store.dispatch((0,n.uH)({message:""})),this.notification.showSuccess("The Tasks have been Loaded from DB","SUCCESS"),(0,i.Hg)({tasks:E}))))),(0,t.K)(o=>{this.store.dispatch((0,n.Tc)({status:!1}));const u=this.tasksService.getErrorMessage(o.statusText);return console.log(o.statusText),(0,h.of)((0,n.uH)({message:u}))}),f())),this.addTask$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(i.gI),(0,p.z)(o=>this.tasksService.addTask(o.task).pipe((0,e.U)(u=>{this.store.dispatch((0,n.Tc)({status:!1})),this.store.dispatch((0,n.uH)({message:""}));const E={...o.task,id:u.name};return this.router.navigate(["todo-tasks"]),this.notification.showSuccess("The Task has been Created","SUCCESS"),(0,i.Zn)({task:E})}))),(0,t.K)(o=>{this.store.dispatch((0,n.Tc)({status:!1}));const u=this.tasksService.getErrorMessage(o.statusText);return console.log(o.statusText),this.router.navigate(["todo-tasks"]),(0,h.of)((0,n.uH)({message:u}))}),f())),this.updateTask$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(i.xJ),(0,D.w)(o=>this.tasksService.updateTask(o.task).pipe((0,e.U)(u=>{this.store.dispatch((0,n.Tc)({status:!1})),this.store.dispatch((0,n.uH)({message:""})),this.notification.showSuccess("The Task has been Updated","SUCCESS");const E={id:o.task.id,changes:{...o.task}};return(0,i.Rj)({task:E})}))),(0,t.K)(o=>{this.store.dispatch((0,n.Tc)({status:!1}));const u=this.tasksService.getErrorMessage(o.statusText);return console.log(o.statusText),(0,h.of)((0,n.uH)({message:u}))}),f())),this.deleteTask$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(i._5),(0,D.w)(o=>this.tasksService.deleteTask(o.id).pipe((0,e.U)(()=>(this.store.dispatch((0,n.Tc)({status:!1})),this.store.dispatch((0,n.uH)({message:""})),this.notification.showSuccess("The Task has been Deleted","SUCCESS"),(0,i.bl)({id:o.id}))))),(0,t.K)(o=>{this.store.dispatch((0,n.Tc)({status:!1}));const u=this.tasksService.getErrorMessage(o.statusText);return console.log(o.statusText),(0,h.of)((0,n.uH)({message:u}))}),f())),this.changeTaskStatus$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(i.kj),(0,D.w)(o=>this.tasksService.changeTaskStatus(o.task).pipe((0,e.U)(u=>{this.store.dispatch((0,n.Tc)({status:!1})),this.store.dispatch((0,n.uH)({message:""})),this.notification.showSuccess("The Task Status has been Changed","SUCCESS");const E={id:o.task.id,changes:{...o.task}};return(0,i.aO)({task:E})}))),(0,t.K)(o=>{this.store.dispatch((0,n.Tc)({status:!1}));const u=this.tasksService.getErrorMessage(o.statusText);return console.log(o.statusText),(0,h.of)((0,n.uH)({message:u}))}),f())),this.getSingleTask$=(0,a.GW)(()=>this.actions$.pipe((0,a.l4)(k.tE),(0,L.h)(o=>o.payload.routerState.url.startsWith("/done-tasks/details")?o.payload.routerState.url.startsWith("/done-tasks/details"):o.payload.routerState.url.startsWith("/todo-tasks/details")),(0,l.M)(this.store.select(d.a),(o,u)=>u.state.params.id),(0,l.M)(this.store.select(c.Ak)),(0,D.w)(([o,u])=>u.length?(0,h.of)((0,i.Lk)()):this.tasksService.getTaskById(o).pipe((0,e.U)(E=>{this.store.dispatch((0,n.Tc)({status:!1})),this.store.dispatch((0,n.uH)({message:""}));const x=[{...E,id:o}];return(0,i.Hg)({tasks:x})}))),(0,t.K)(o=>{this.store.dispatch((0,n.Tc)({status:!1}));const u=this.tasksService.getErrorMessage(o.statusText);return console.log(o.statusText),(0,h.of)((0,n.uH)({message:u}))}),f()))}}return _.\u0275fac=function(r){return new(r||_)(T.LFG(a.eX),T.LFG(M.yh),T.LFG(b),T.LFG(F.F0),T.LFG(B.g))},_.\u0275prov=T.Yz7({token:_,factory:_.\u0275fac}),_})()},9058:(U,m,s)=>{s.d(m,{f:()=>e});var a=s(9653),i=s(9542),l=s(2004);const p=(0,a.Lq)(i.E,(0,a.on)(l.Zn,(t,g)=>i.T.addOne(g.task,t)),(0,a.on)(l.Rj,(t,g)=>i.T.updateOne(g.task,t)),(0,a.on)(l.bl,(t,{id:g})=>i.T.removeOne(g,t)),(0,a.on)(l.Hg,(t,g)=>i.T.setAll(g.tasks,t)),(0,a.on)(l.aO,(t,g)=>i.T.updateOne(g.task,t)));function e(t,g){return p(t,g)}},2110:(U,m,s)=>{s.d(m,{h:()=>i});var a=s(4650);let i=(()=>{class l{transform(e){return[...e].reverse()}}return l.\u0275fac=function(e){return new(e||l)},l.\u0275pipe=a.Yjl({name:"latestOrder",type:l,pure:!0}),l})()},4466:(U,m,s)=>{s.d(m,{m:()=>e});var a=s(6895),i=s(4006),l=s(92),p=s(4650);let e=(()=>{class t{}return t.\u0275fac=function(v){return new(v||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[i.u5,i.UX,a.ez,l.M]}),t})()}}]);